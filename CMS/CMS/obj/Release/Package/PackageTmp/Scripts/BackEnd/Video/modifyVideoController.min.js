admin.controller("modifyVideoController",["$scope","$http","$window","$location","$filter","$sce","Alias","Url",function(n,t,i,r,u,f,e,o){function s(){n.video.id!==null?c(n.video.id):h()}function h(){n.video={published:!0,featured:!1}}function c(){t.get(apiVideo+"/"+n.video.id).then(function(t){n.video=angular.copy(t.data)},function(){i.location.href="/Admin/Video"})}apiVideo="/API/VideoAPI";n.video={};n.items=[];n.item={};apiItemVideo="/API/ItemVideoAPI";n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.featureds=[{text:"Có",value:!0},{text:"Không",value:!1}];n.video.id=o.getParameterByName("idVideo");n.modifyItem=!1;n.titlePopupModifyItem="Thêm hình ảnh";n.popupModifyItem={maxWidth:600,height:"auto",contentTemplate:"templateModifyItem",showTitle:!0,resizeEnabled:!0,bindingOptions:{title:"titlePopupModifyItem",visible:"modifyItem"}};n.deleteItem=!1;n.titleDeleteItem="Bạn có chắc chắn muốn xóa?";n.popupDeleteItem={width:"auto",height:"auto",contentTemplate:"templateDeleteItem",showTitle:!1,bindingOptions:{visible:"deleteItem"}};n.controlItem={title:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"item.title"}},description:{height:150,valueChangeEvent:"keyup",bindingOptions:{value:"item.description"}}};s();n.Save=function(){n.video.id==null?t.post(apiVideo,n.video).then(function(t){n.video=angular.copy(t.data);toastr.success("Thành công","Thêm Video");i.location.href="/Admin/Video/Modify?idVideo="+n.video.id},function(){toastr.error("Thất bại","Thêm Video")}):t.put(apiVideo+"/"+n.video.id,n.video).then(function(){toastr.success("Thành công","Lưu Video")},function(){toastr.error("Thất bại","Lưu Video")})};n.Cancel=function(){i.location.href="/Admin/Video"};n.ChooseImage=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.video.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.video.alias=angular.copy(e.genAlias(n.video.title))}}]);